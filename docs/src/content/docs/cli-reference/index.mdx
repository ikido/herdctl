---
title: CLI Reference
description: Complete command reference for herdctl
---

import { Aside, Tabs, TabItem } from '@astrojs/starlight/components';

The `herdctl` CLI provides commands for managing and interacting with your agent fleet.

## Installation

```bash
# Install globally
npm install -g herdctl

# Or use via npx
npx herdctl [command]
```

## Commands

### trigger

Manually trigger an agent to run a job.

```bash
herdctl trigger <agent-name> [options]
```

**Arguments:**

| Argument | Description |
|----------|-------------|
| `agent-name` | Name of the agent to trigger |

**Options:**

| Option | Description |
|--------|-------------|
| `-p, --prompt <text>` | Prompt to send to the agent (uses `default_prompt` if not specified) |
| `-q, --quiet` | Suppress streaming output during execution |
| `--json` | Output result in JSON format |

**Examples:**

```bash
# Trigger with default prompt (if agent has default_prompt configured)
herdctl trigger price-checker

# Trigger with custom prompt
herdctl trigger hurricane-watcher --prompt "Check for storms near Miami"

# Quiet mode - no streaming, just final result
herdctl trigger my-agent -q

# JSON output for scripting
herdctl trigger my-agent --json
```

**Streaming Output:**

By default, the trigger command streams the agent's output in real-time:

```
$ herdctl trigger price-checker
Triggering agent: price-checker
Job started: job-2024-01-15-abc123

I'll check the current prices for office chairs at Staples and IKEA.

First, let me fetch the Staples Hyken chair page...
[...]

**Price Check Complete**: Staples Hyken at $159.99 (best deal, meets $200 target).
IKEA MARKUS at $299.99. Buy here: https://www.staples.com/...

Job completed successfully in 45.2s
```

**Output Display:**

After job completion, the agent's final output is displayed (truncated at 20,000 characters if needed). Use `--quiet` to suppress this.

**Hooks:**

If the agent has [hooks](/concepts/hooks/) configured, they run after the job completes. Hook execution is logged:

```
Running hook: Price alert (discord)
Hook completed: Price alert
```

### status

Show the status of agents and running jobs.

```bash
herdctl status [agent-name]
```

**Examples:**

```bash
# Show all agents
herdctl status

# Show specific agent
herdctl status price-checker
```

### logs

View logs for agents or specific jobs.

```bash
herdctl logs [agent-name] [options]
```

**Options:**

| Option | Description |
|--------|-------------|
| `-f, --follow` | Stream logs in real-time |
| `--job <id>` | Show logs for specific job |
| `-n, --lines <count>` | Number of lines to show (default: 100) |

**Examples:**

```bash
# View recent logs
herdctl logs price-checker

# Follow logs in real-time
herdctl logs price-checker -f

# View specific job logs
herdctl logs --job job-2024-01-15-abc123
```

### start

Start the fleet daemon to run scheduled jobs.

```bash
herdctl start [options]
```

**Options:**

| Option | Description |
|--------|-------------|
| `-d, --daemon` | Run in background |
| `--agent <name>` | Start specific agent only |

**Examples:**

```bash
# Start all agents
herdctl start

# Start in background
herdctl start -d

# Start specific agent
herdctl start --agent price-checker
```

### stop

Stop running agents.

```bash
herdctl stop [agent-name]
```

**Examples:**

```bash
# Stop all agents
herdctl stop

# Stop specific agent
herdctl stop price-checker
```

### cancel

Cancel a running job.

```bash
herdctl cancel <job-id>
```

**Arguments:**

| Argument | Description |
|----------|-------------|
| `job-id` | ID of the job to cancel |

**Examples:**

```bash
# Cancel a specific job
herdctl cancel job-2024-01-15-abc123
```

### validate

Validate configuration files.

```bash
herdctl validate [path]
```

**Examples:**

```bash
# Validate all configuration
herdctl validate

# Validate specific agent
herdctl validate agents/my-agent.yaml
```

### init

Initialize a new herdctl project.

```bash
herdctl init [options]
```

**Options:**

| Option | Description |
|--------|-------------|
| `--example <name>` | Start from an example template |

**Examples:**

```bash
# Initialize in current directory
herdctl init

# Initialize from example
herdctl init --example price-checker
```

### sessions

List and manage Claude Code sessions for your agents. When agents run with session persistence enabled, herdctl tracks their Claude Code session IDs, making them discoverable and resumable.

```bash
herdctl sessions [options]
```

**Options:**

| Option | Description |
|--------|-------------|
| `-a, --agent <name>` | Filter sessions by agent name |
| `-v, --verbose` | Show full resume commands for each session |
| `--json` | Output as JSON for scripting |

**Examples:**

```bash
# List all sessions
herdctl sessions

# Output:
# Sessions (2)
# ══════════════════════════════════════════════════════════════════════════════
# AGENT               SESSION ID                               LAST ACTIVE   JOBS
# ──────────────────────────────────────────────────────────────────────────────
# bragdoc-developer   a166a1e4-c89e-41f8-80c8-d73f6cd0d39c     5m ago        19
# price-checker       b234e5f6-a78b-49c0-d12e-3456789abcde     2h ago        3

# Filter by agent
herdctl sessions --agent bragdoc-developer

# Show full resume commands
herdctl sessions --verbose

# JSON output for scripting
herdctl sessions --json
```

### sessions resume

Resume a Claude Code session interactively. This launches Claude Code with the `--resume` flag in the agent's configured workspace directory.

```bash
herdctl sessions resume [session-id]
```

**Arguments:**

| Argument | Description |
|----------|-------------|
| `session-id` | Session ID, partial ID, or agent name (optional - defaults to most recent) |

**Behavior:**

- If no argument is provided, resumes the most recently active session
- Supports partial session ID matching (e.g., `a166a1e4` matches `a166a1e4-c89e-41f8-80c8-d73f6cd0d39c`)
- Accepts agent name to resume that agent's session
- Automatically changes to the agent's workspace directory before launching Claude

**Examples:**

```bash
# Resume the most recent session
herdctl sessions resume

# Resume by full session ID
herdctl sessions resume a166a1e4-c89e-41f8-80c8-d73f6cd0d39c

# Resume by partial session ID
herdctl sessions resume a166a1e4

# Resume by agent name
herdctl sessions resume bragdoc-developer
```

**Output:**

```
Resuming session for bragdoc-developer (19 jobs, last active 5m ago)
Session: a166a1e4-c89e-41f8-80c8-d73f6cd0d39c
Workspace: /path/to/project

Running: claude --resume a166a1e4-c89e-41f8-80c8-d73f6cd0d39c
     in: /path/to/project
```

<Aside type="tip">
The `sessions resume` command is particularly useful for picking up where a Discord bot or scheduled agent left off, allowing you to continue the conversation interactively.
</Aside>

See [Sessions](/concepts/sessions/) for more about session modes and persistence.

## Global Options

These options work with all commands:

| Option | Description |
|--------|-------------|
| `-c, --config <path>` | Path to herdctl.yaml (default: `./herdctl.yaml`) |
| `-v, --verbose` | Enable verbose output |
| `--version` | Show version number |
| `--help` | Show help |

## Exit Codes

| Code | Meaning |
|------|---------|
| `0` | Success |
| `1` | General error |
| `2` | Configuration error |
| `3` | Agent error |
| `4` | Job error |

## Environment Variables

| Variable | Description |
|----------|-------------|
| `ANTHROPIC_API_KEY` | **Required.** Claude API key |
| `HERDCTL_CONFIG` | Path to config file (alternative to `-c`) |
| `HERDCTL_LOG_LEVEL` | Log level: `debug`, `info`, `warn`, `error` |

Additional environment variables may be required for integrations:

| Variable | Description |
|----------|-------------|
| `GITHUB_TOKEN` | GitHub API access for work sources |
| `DISCORD_BOT_TOKEN` | Discord bot token for notifications/chat |
| `DISCORD_CHANNEL_ID` | Default Discord channel for notifications |

## Configuration Files

herdctl looks for configuration in this order:

1. Path specified with `-c` / `--config`
2. `HERDCTL_CONFIG` environment variable
3. `./herdctl.yaml` in current directory
4. `./agents/*.yaml` for agent definitions

See [Fleet Configuration](/configuration/fleet-config/) and [Agent Configuration](/configuration/agent-config/) for details.

## Related Pages

- [Getting Started](/getting-started/) — First-time setup guide
- [Agent Configuration](/configuration/agent-config/) — Agent YAML reference
- [Sessions](/concepts/sessions/) — Session modes and persistence
- [Hooks](/concepts/hooks/) — Post-job notifications and actions
- [Triggers](/concepts/triggers/) — How jobs are started
